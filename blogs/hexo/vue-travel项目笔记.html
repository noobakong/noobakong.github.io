<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue-travel项目笔记 | noobakong</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="记录前端点滴">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/assets/css/0.styles.e2a2474a.css" as="style"><link rel="preload" href="/assets/js/app.ebd6c005.js" as="script"><link rel="preload" href="/assets/js/3.f6a0899c.js" as="script"><link rel="preload" href="/assets/js/1.38ae5032.js" as="script"><link rel="preload" href="/assets/js/28.04d5f483.js" as="script"><link rel="prefetch" href="/assets/js/10.1e2b572c.js"><link rel="prefetch" href="/assets/js/11.941c9f12.js"><link rel="prefetch" href="/assets/js/12.894a9104.js"><link rel="prefetch" href="/assets/js/13.bcb96da3.js"><link rel="prefetch" href="/assets/js/14.e8f68016.js"><link rel="prefetch" href="/assets/js/15.a271d641.js"><link rel="prefetch" href="/assets/js/16.4193ad16.js"><link rel="prefetch" href="/assets/js/17.dd28b90c.js"><link rel="prefetch" href="/assets/js/18.cbd4edf9.js"><link rel="prefetch" href="/assets/js/19.9a966686.js"><link rel="prefetch" href="/assets/js/20.a8a2097f.js"><link rel="prefetch" href="/assets/js/21.462d1828.js"><link rel="prefetch" href="/assets/js/22.2bb05b26.js"><link rel="prefetch" href="/assets/js/23.9bc42b39.js"><link rel="prefetch" href="/assets/js/24.ae4c01dc.js"><link rel="prefetch" href="/assets/js/25.9ff478f2.js"><link rel="prefetch" href="/assets/js/26.2ded3d1e.js"><link rel="prefetch" href="/assets/js/27.ca74b8db.js"><link rel="prefetch" href="/assets/js/29.deed672d.js"><link rel="prefetch" href="/assets/js/30.0253a5cf.js"><link rel="prefetch" href="/assets/js/31.3d715f59.js"><link rel="prefetch" href="/assets/js/32.2ebf423d.js"><link rel="prefetch" href="/assets/js/33.dba7a48b.js"><link rel="prefetch" href="/assets/js/34.e2f6ebc9.js"><link rel="prefetch" href="/assets/js/35.d52fe6e3.js"><link rel="prefetch" href="/assets/js/36.bec7acc7.js"><link rel="prefetch" href="/assets/js/37.f09e8208.js"><link rel="prefetch" href="/assets/js/38.7c584dbb.js"><link rel="prefetch" href="/assets/js/39.5e5ba1c9.js"><link rel="prefetch" href="/assets/js/4.a8b34b22.js"><link rel="prefetch" href="/assets/js/40.f8e67595.js"><link rel="prefetch" href="/assets/js/41.bc07f720.js"><link rel="prefetch" href="/assets/js/42.b12ff0a8.js"><link rel="prefetch" href="/assets/js/43.ea70066b.js"><link rel="prefetch" href="/assets/js/44.ee1b3672.js"><link rel="prefetch" href="/assets/js/45.a671aa3a.js"><link rel="prefetch" href="/assets/js/46.60aa2684.js"><link rel="prefetch" href="/assets/js/47.0945643f.js"><link rel="prefetch" href="/assets/js/48.a83efdad.js"><link rel="prefetch" href="/assets/js/49.b324f527.js"><link rel="prefetch" href="/assets/js/5.e4865572.js"><link rel="prefetch" href="/assets/js/50.d89f73c2.js"><link rel="prefetch" href="/assets/js/51.357703b9.js"><link rel="prefetch" href="/assets/js/52.a7f4250f.js"><link rel="prefetch" href="/assets/js/53.87cdfdcd.js"><link rel="prefetch" href="/assets/js/54.3ca723fb.js"><link rel="prefetch" href="/assets/js/55.926c0e23.js"><link rel="prefetch" href="/assets/js/56.40c01323.js"><link rel="prefetch" href="/assets/js/57.dc825a4d.js"><link rel="prefetch" href="/assets/js/58.d5a13d0a.js"><link rel="prefetch" href="/assets/js/59.24ad0e2f.js"><link rel="prefetch" href="/assets/js/6.6453168c.js"><link rel="prefetch" href="/assets/js/60.e7889745.js"><link rel="prefetch" href="/assets/js/61.8af2f643.js"><link rel="prefetch" href="/assets/js/62.9b5a8b09.js"><link rel="prefetch" href="/assets/js/7.62451418.js"><link rel="prefetch" href="/assets/js/8.72d4f02a.js"><link rel="prefetch" href="/assets/js/9.4bd4f82b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e2a2474a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1c920fb4><div data-v-1c920fb4><div id="loader-wrapper" class="loading-wrapper" data-v-71fac282 data-v-1c920fb4 data-v-1c920fb4><div class="loader-main" data-v-71fac282><div data-v-71fac282></div><div data-v-71fac282></div><div data-v-71fac282></div><div data-v-71fac282></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-6ef27168 data-v-1c920fb4 data-v-1c920fb4><h3 class="title" style="display:none;" data-v-6ef27168 data-v-6ef27168>noobakong</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6ef27168 data-v-6ef27168><input type="password" value="" data-v-6ef27168> <span data-v-6ef27168>Konck! Knock!</span> <button data-v-6ef27168>OK</button></label> <div class="footer" style="display:none;" data-v-6ef27168 data-v-6ef27168><span data-v-6ef27168><i class="iconfont reco-theme" data-v-6ef27168></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6ef27168>vuePress-theme-reco</a></span> <span data-v-6ef27168><i class="iconfont reco-copyright" data-v-6ef27168></i> <a data-v-6ef27168><span data-v-6ef27168>akong</span>
            
          <span data-v-6ef27168>2018 - </span>
          2020
        </a></span></div></div> <div class="hide" data-v-1c920fb4><header class="navbar" data-v-1c920fb4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">noobakong</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/categories/ES6/" class="nav-link"><i class="iconfont undefined"></i>
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/categories/网络HTTP/" class="nav-link"><i class="iconfont undefined"></i>
  网络HTTP
</a></li><li class="dropdown-item"><!----> <a href="/categories/CSS/" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/categories/Node/" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/categories/工具相关/" class="nav-link"><i class="iconfont undefined"></i>
  工具相关
</a></li><li class="dropdown-item"><!----> <a href="/categories/Project/" class="nav-link"><i class="iconfont undefined"></i>
  Project
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法/" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/noobakong" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  阿孔的GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/3104676568113975" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-juejin"></i>
  阿孔的掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/noobakong" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  阿孔的语雀
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1c920fb4></div> <aside class="sidebar" data-v-1c920fb4><div class="personal-info-wrapper" data-v-44c89ab2 data-v-1c920fb4><img src="/touxiang.jpg" alt="author-avatar" class="personal-img" data-v-44c89ab2> <h3 class="name" data-v-44c89ab2>
    akong
  </h3> <div class="num" data-v-44c89ab2><div data-v-44c89ab2><h3 data-v-44c89ab2>45</h3> <h6 data-v-44c89ab2>Article</h6></div> <div data-v-44c89ab2><h3 data-v-44c89ab2>52</h3> <h6 data-v-44c89ab2>Tag</h6></div></div> <hr data-v-44c89ab2></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/categories/ES6/" class="nav-link"><i class="iconfont undefined"></i>
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/categories/网络HTTP/" class="nav-link"><i class="iconfont undefined"></i>
  网络HTTP
</a></li><li class="dropdown-item"><!----> <a href="/categories/CSS/" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/categories/Node/" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/categories/工具相关/" class="nav-link"><i class="iconfont undefined"></i>
  工具相关
</a></li><li class="dropdown-item"><!----> <a href="/categories/Project/" class="nav-link"><i class="iconfont undefined"></i>
  Project
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法/" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/noobakong" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  阿孔的GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/3104676568113975" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-juejin"></i>
  阿孔的掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/noobakong" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  阿孔的语雀
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-6ef27168 data-v-1c920fb4><h3 class="title" style="display:none;" data-v-6ef27168 data-v-6ef27168>vue-travel项目笔记</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6ef27168 data-v-6ef27168><input type="password" value="" data-v-6ef27168> <span data-v-6ef27168>Konck! Knock!</span> <button data-v-6ef27168>OK</button></label> <div class="footer" style="display:none;" data-v-6ef27168 data-v-6ef27168><span data-v-6ef27168><i class="iconfont reco-theme" data-v-6ef27168></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6ef27168>vuePress-theme-reco</a></span> <span data-v-6ef27168><i class="iconfont reco-copyright" data-v-6ef27168></i> <a data-v-6ef27168><span data-v-6ef27168>akong</span>
            
          <span data-v-6ef27168>2018 - </span>
          2020
        </a></span></div></div> <div data-v-1c920fb4><main class="page"><div class="page-title" style="display:none;"><h1>vue-travel项目笔记</h1> <div data-v-d5d1b660><i class="iconfont reco-account" data-v-d5d1b660><span data-v-d5d1b660>akong</span></i> <i class="iconfont reco-date" data-v-d5d1b660><span data-v-d5d1b660>2018-08-12 17:50:40</span></i> <!----> <i class="iconfont reco-tag tags" data-v-d5d1b660><span class="tag-item" data-v-d5d1b660>vue</span><span class="tag-item" data-v-d5d1b660>project</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><blockquote><p>跟学一个vue实战教程，记录的笔记以及项目注意事项，细节。</p></blockquote> <h1 id="vue-travel"><a href="#vue-travel" class="header-anchor">#</a> vue-travel</h1> <p><img src="https://blog-1257919906.cos.ap-guangzhou.myqcloud.com/vue-travel.gif" alt="项目展示"></p> <h2 id="_1-初始化项目"><a href="#_1-初始化项目" class="header-anchor">#</a> 1. 初始化项目</h2> <h3 id="_1-1-手机显示配适"><a href="#_1-1-手机显示配适" class="header-anchor">#</a> 1.1 手机显示配适</h3> <p><code>minimum-scale=1.0,maximum-scale=1.0,user-scalable=no&quot;</code> 阻止用户手滑发大缩小页面</p> <h3 id="_1-2-初始化样式-引入reset-css"><a href="#_1-2-初始化样式-引入reset-css" class="header-anchor">#</a> 1.2 初始化样式 --&gt;引入reset.css</h3> <h3 id="_1-3-移动端多倍屏边框不准的问题-引入-border-css"><a href="#_1-3-移动端多倍屏边框不准的问题-引入-border-css" class="header-anchor">#</a> 1.3 移动端多倍屏边框不准的问题 --&gt; 引入 border.css</h3> <h3 id="_1-4-解决click延迟300ms的问题-引入-fastclick-库"><a href="#_1-4-解决click延迟300ms的问题-引入-fastclick-库" class="header-anchor">#</a> 1.4 解决click延迟300ms的问题 --&gt; 引入 fastclick 库</h3> <ul><li><code>npm install fastclick --save</code></li> <li>在main.js中引入fastclick <code>import fastClick from 'fastclick'</code></li> <li><code>fastClick.attach(document.body)</code></li></ul> <h3 id="_1-5-注册阿里的iconfont并创建travel项目"><a href="#_1-5-注册阿里的iconfont并创建travel项目" class="header-anchor">#</a> 1.5 注册阿里的iconfont并创建travel项目</h3> <h2 id="_2-首页的开发"><a href="#_2-首页的开发" class="header-anchor">#</a> 2. 首页的开发</h2> <h3 id="_2-1-准备工作-注意事项"><a href="#_2-1-准备工作-注意事项" class="header-anchor">#</a> 2.1 准备工作&amp;注意事项</h3> <h4 id="_1-项目中使用stylus来编写css样式"><a href="#_1-项目中使用stylus来编写css样式" class="header-anchor">#</a> (1).项目中使用stylus来编写css样式</h4> <p><code>npm install stylus --save</code> <code>npm install stylus-loader --save</code></p> <ul><li>要学习stylus语法</li> <li>学习flex布局 rem布局的用法</li></ul> <h4 id="_2-iconfont的使用和代码的优化"><a href="#_2-iconfont的使用和代码的优化" class="header-anchor">#</a> (2). iconfont的使用和代码的优化</h4> <ul><li>如何使用iconfont</li></ul> <blockquote><ol><li>进入iconfont官网，选择图标，加入购物车放入项目中</li> <li>下载zip包并解压，把字体文件放入src/assets/styles/iconfont文件夹中
把iconfont.css放在src/assets/styles中，把css中的文件路径改一下（因为此时&gt;css和字体文件不在同一目录下了，默认的css和字体文件在一个文件夹内）</li> <li>在main.js中引入字体文件 <code>import './assets/styles/iconfont.css'</code></li> <li>上述完成后，在想要使用图标的标签上加入 <code>iconfont</code> 类名，就可以在页面中使用 &gt;图标了，可以用每一个图标类名来引用，也可以使用编码的形式来使用，每一个图标的编码
都在 iconfont官网我的项目图标里面，点击复制图标就能得到图标编码；</li></ol></blockquote> <ul><li>优化代码</li></ul> <blockquote><p>有些代码的样式是多变的，我们可以将可变的css放入assets styles文件夹的varibles.styl文件中，方便以后的更爱--》改一处全部就改的效果</p></blockquote> <p>例如：
我们的背景色就是一个可改变的css参数，我们可以在varibles.styl中定义 <code>$bgcolor = #00bcd4</code> 背景色
而后在样式里引入这个styl文件即可
<code>@import '../../../assets/styles/varibles.styl';</code> <code>background-color $bgcolor</code></p> <p>但是@import文件引入的前缀非常长，在可以使用@符号可以优化此问题
因为我们在webpack配置js文件中制定<code>'@': resolve('src'),</code> 制定了@就是src目录
但是我们在css中引入css文件是 需要使用src的时候 要在@前面再多加一个~符号</p> <p>相同的 我们的sytles文件夹多次使用 我们可以在webapck.config.js文件中定义
<code>'styles': resolve('src/assets/styles'),</code>
这样我们使用styles目录的时候就可以简化了</p> <h4 id="_3-在github上创建新分支"><a href="#_3-在github上创建新分支" class="header-anchor">#</a> (3). 在github上创建新分支</h4> <blockquote><p>在企业级的开发里，每一个新功能或新模块的开发都是在一个新的分支上进行
开发完成后再合并到master主分支上</p></blockquote> <div class="language- extra-class"><pre><code>在github上创建仓库：
Create a new repository on the command line

touch README.md
git init
git add README.md
git commit -m &quot;first commit&quot;
git remote add &lt;name&gt; &lt;url&gt; 
git push -u origin master

在本地新建一个分支： git branch Branch1
切换到你的新分支: git checkout Branch1
将新分支发布在github上： git push origin Branch1
在本地删除一个分支： git branch -d Branch1
在github远程端删除一个分支： git push origin :Branch1   (分支名前的冒号代表删除)
</code></pre></div><h4 id="_4-管理分支的一些语法"><a href="#_4-管理分支的一些语法" class="header-anchor">#</a> (4).管理分支的一些语法</h4> <ol><li>查看分支</li></ol> <ul><li>查看本地分支</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ git branch
* master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>查看远程分支
<code>git branch -r</code></li> <li>查看所有分支
<code>git branch -a</code></li></ul> <ol start="2"><li><p>本地创建新的分支
<code>git branch [branch name]</code></p></li> <li><p>切换到新的分支
<code>git checkout [branch name]</code></p></li> <li><p>创建+切换分支
<code>git checkout -b [branch name]</code>
git checkout -b [branch name] 的效果相当于以下两步操作:
<code>git branch [branch name] + git checkout [branch name]</code></p></li> <li><p>将新分支推送到github
<code>git push origin [branch name]</code> orgin是你远程仓库的名字</p></li> <li><p>删除本地分支
<code>git branch -d [branch name]</code></p></li> <li><p>删除github远程分支
<code>git push origin :[branch name]</code>  分支名前的冒号代表删除。</p></li> <li><p>合并分支</p></li></ol> <div class="language-git line-numbers-mode"><pre class="language-git"><code>git checkout master
git merge &lt;name&gt;/&lt;new-branch-name&gt;
git push
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-2-首页轮播"><a href="#_2-2-首页轮播" class="header-anchor">#</a> 2.2 首页轮播</h3> <p>首页轮播图，采用vue-awesome-swiper插件</p> <blockquote><p><a href="https://github.com/surmon-china/vue-awesome-swiper" target="_blank" rel="noopener noreferrer">vue-awesome-swiper github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>npm装包</p> <blockquote><p><code>npm install vue-awesome-swiper@2.6.7 --save</code></p></blockquote> <p>使用方法和使用步骤参考官网</p> <p>在swiper-slide标签里填入img属性并引入src 加入类swiper-img 在style里定义width的宽度为100% 即可适应轮播</p> <blockquote><p>此时的页面在网速不好的情况下会发生页面抖动 如何解决
在轮播元素的最外层加一个class为wrapper的div 然后定义.wrapper的样式</p></blockquote> <div class="language-stylus line-numbers-mode"><pre class="language-stylus"><code>  <span class="token selector">.wrapper</span>
    <span class="token property-declaration"><span class="token property">overflow</span> hidden</span>
    <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100</span><span class="token unit">%</span></span>
    <span class="token property-declaration"><span class="token property">height</span> <span class="token number">0</span></span>
    <span class="token property-declaration"><span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token number">26.67</span><span class="token unit">%</span></span>
    <span class="token property-declaration"><span class="token property">background</span> <span class="token hexcode">#eee</span></span>
    <span class="token selector">.swiper-img</span>
      <span class="token property-declaration"><span class="token property">width</span> <span class="token number">100</span><span class="token unit">%</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>这样就能把轮播图的位置保持撑起，就不会发生页面抖动了</p> <blockquote><p>此时，又有一个问题，我们需要导航点，怎么实现</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>swiperOption: {
        pagination: '.swiper-pagination'
      }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在swiperOption里添加pagination配置项就可以了</p> <blockquote><p>此时的导航激活状态是蓝色的 怎么更改为白色？
我们可以在页面查看小原点的类名为<code>swiper-pagination-bullet-active</code>，我们如果直接在样式中修改这个样式的background，是达不到更改效果的，为什么，因为此时的样式是当前组件的样式，而这个小圆点属于swiper组件的样式
<strong>这时，我们可以使用穿透样式来实现</strong>
在样式的最前面编写如下代码</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>.wrapper &gt;&gt;&gt; .swiper-pagination-bullet-active
    background: #eee
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这样，就能达到从一个组件穿刺到另一个组件的样式更改</p> <blockquote><p>最后 使用v-for 对图标进行列表渲染循环，把数据保存到data的swiperList对象中</p></blockquote> <h3 id="_2-3-图标区域页面布局"><a href="#_2-3-图标区域页面布局" class="header-anchor">#</a> 2.3 图标区域页面布局</h3> <p><strong>初始化</strong></p> <ul><li>git创建分支</li> <li>新建icons.vue</li> <li>Home.vue中引入组件</li></ul> <p><strong>图标区域逻辑实现</strong></p> <blockquote><p>当页面图标大于八个 可以左右拖动</p></blockquote> <ol><li>在图标元素外加入swiper-slide标签和swiper标签</li></ol> <h3 id="_2-4-首页推荐组件开发"><a href="#_2-4-首页推荐组件开发" class="header-anchor">#</a> 2.4 首页推荐组件开发</h3> <h3 id="_2-5-周末游组件开发"><a href="#_2-5-周末游组件开发" class="header-anchor">#</a> 2.5 周末游组件开发</h3> <h2 id="_3-使用ajax传递数据"><a href="#_3-使用ajax传递数据" class="header-anchor">#</a> 3 使用ajax传递数据</h2> <h3 id="_3-1-准备工作"><a href="#_3-1-准备工作" class="header-anchor">#</a> 3.1 准备工作</h3> <blockquote><p>vue官方推荐使用axios来完成ajax数据的请求</p></blockquote> <ul><li>装包: <code>npm install axios --save</code></li> <li>home组件中引入axios</li> <li>结合vue的mouted生命周期钩子来完成请求</li></ul> <p>如果每个子组件都发送一个ajax请求来获取数据的话，一个首页就要请求多个ajax请求，会使我们的程序效率下降，我们可以在home组件请求一个ajax请求，把数据传给子组件，这样就能提高效率</p> <blockquote><p>怎么模拟后台的数据呢？</p></blockquote> <p><strong>因为我们页面整直接访问static文件夹</strong>,所以我们可以在static下创建一个mock文件夹，里面定影json文件来模拟后台数据</p> <p>但是我们并不想提交我们的数据到github，所以我们可以在gitnore文件中排除文件</p> <p>我们上线后的ajax请求地址都是基本都是相对路径'/api/下的json文件，但是此时我们的文件在static/mock文件夹中，我们可以把axios的请求地址改成我们本地的static/mock，但是这样做的话以后上线前要更改代码，这是不可取的</p> <blockquote><p>即使用api文件目录，又能获取到static中的文件，怎么办？</p></blockquote> <p>我们可以使用vue基于webpack-dev-serve的一个配置选项来解决这个问题，在vuecli生成的config文件夹中index.js文件有一个<code>proxyTable</code>配置选项
我们可以这样来替换我们的请求地址：</p> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>proxyTable<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">'http://localhost:8080'</span><span class="token punctuation">,</span>
        pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">'^/api'</span><span class="token operator">:</span> <span class="token string">'/static/mock'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>这样，就能完美解决我们的问题了</p> <blockquote><p>注意，json格式的每一项的最后一项不要加带分号，这样可能会导致json数据解析失败</p></blockquote> <h3 id="_3-2-首页父子组件数据传递"><a href="#_3-2-首页父子组件数据传递" class="header-anchor">#</a> 3.2 首页父子组件数据传递</h3> <p>由于home组件获取json数据后，应该向子组件传递数据，这就涉及到父组件向子组件传值的问题
父组件通过属性向子组件传值，子组件props接受数据</p> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>methods<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">getHomeInfo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/index.json'</span><span class="token punctuation">)</span> <span class="token comment">// 返回的是一个promise对象，后面使用then</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>getHomeInfoSucc<span class="token punctuation">)</span> <span class="token comment">// 获取成功执行getHomeInfoSucc函数</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">getHomeInfoSucc</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">=</span> res<span class="token punctuation">.</span>data
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>ret <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data
      <span class="token keyword">this</span><span class="token punctuation">.</span>city <span class="token operator">=</span> data<span class="token punctuation">.</span>city
      <span class="token keyword">this</span><span class="token punctuation">.</span>swiperList <span class="token operator">=</span> data<span class="token punctuation">.</span>swiperList
      <span class="token keyword">this</span><span class="token punctuation">.</span>iconList <span class="token operator">=</span> data<span class="token punctuation">.</span>iconList
      <span class="token keyword">this</span><span class="token punctuation">.</span>recommendList <span class="token operator">=</span> data<span class="token punctuation">.</span>recommendList
      <span class="token keyword">this</span><span class="token punctuation">.</span>weekendList <span class="token operator">=</span> data<span class="token punctuation">.</span>weekendList
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 页面挂载好执行这个方法ajax获取数据</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="_3-首页的开发"><a href="#_3-首页的开发" class="header-anchor">#</a> 3. 首页的开发</h2> <h3 id="_3-1-初始化准备"><a href="#_3-1-初始化准备" class="header-anchor">#</a> 3.1 初始化准备</h3> <ul><li>配置路由</li> <li>创建组件</li></ul> <h3 id="_3-2-header开发"><a href="#_3-2-header开发" class="header-anchor">#</a> 3.2 header开发</h3> <ul><li>创建组件</li> <li>city.vue导入</li></ul> <h3 id="_3-3-搜索框"><a href="#_3-3-搜索框" class="header-anchor">#</a> 3.3 搜索框</h3> <ul><li>创建组件</li> <li>city.vue导入</li></ul> <h3 id="_3-4-城市列表"><a href="#_3-4-城市列表" class="header-anchor">#</a> 3.4 城市列表</h3> <ul><li>创建组件</li> <li>city.vue导入</li></ul> <blockquote><p>title聊表的边框不太明显，可以给其添加样式</p></blockquote> <div class="language-css line-numbers-mode"><pre class="language-css"><code>  .border-topbottom
    &amp;<span class="token punctuation">:</span>before
      border-color #ccc
    &amp;<span class="token punctuation">:</span>after
      border-color #ccc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>因为我们将要使用一个滚动插件--Better-scroll来完成此页面，所以我们应该禁止页面的超出滚动</p></blockquote> <div class="language-css line-numbers-mode"><pre class="language-css"><code>.list
  overflow hidden
  position absolute
  top 1.58rem
  left 0
  right 0
  bottom 0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>使用<strong>Better-scroll</strong></p> <ul><li>装包 npm install better-scroll --save</li> <li>import Bscroll from 'better-scroll'</li> <li>在vue的mounted时挂载一个better-scroll实例</li></ul> <blockquote><p>因为这个组件需要最外城的wrapper dom元素 我们给最外层标签添加ref=&quot;wrapper&quot;属性</p></blockquote> <h3 id="_3-5-字母滑动选择器"><a href="#_3-5-字母滑动选择器" class="header-anchor">#</a> 3.5 字母滑动选择器</h3> <ul><li>创建组件</li> <li>city.vue导入</li></ul> <p>使用flex布局使其居中</p> <h3 id="_3-6-ajax获取城市数据"><a href="#_3-6-ajax获取城市数据" class="header-anchor">#</a> 3.6 ajax获取城市数据</h3> <ul><li>在city.vue中引入city.json</li> <li>父子间向子组件传递消息</li></ul> <h3 id="_3-7-兄弟组件联动"><a href="#_3-7-兄弟组件联动" class="header-anchor">#</a> 3.7 兄弟组件联动</h3> <p><strong>Todo1. 点击右侧字母表 list也跳到对应的城市也部分</strong></p> <p>循环字母列表时为每一个字母绑定点击事件
alphabet组件传递消息给父组件city，city在传递消息给list组件，实现Alphabet和list的兄弟传值</p> <ul><li><strong>Alphabet.vue</strong><br> <code>@click=&quot;handleLetterClick&quot;</code></li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">handleLetterClick</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><strong>City.vue</strong> <code>@change=&quot;handleLetterChange&quot;</code></li></ul> <div class="language-Javscript line-numbers-mode"><pre class="language-text"><code>handleLetterChange (letter) {
      this.letter = letter
    }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>:letter=&quot;letter&quot;</code> 传递给list.vue组件</p> <ul><li><strong>List.vue</strong>
props 接收 letter
通过watch来监听letter的变化</li></ul> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>  watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">letter</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 监听letter改变</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>letter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>letter<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token comment">// refs--&gt;通过为每个循环绑定ref ref的值对应的是每个key 也就是每个字母</span>
        <span class="token comment">// [0]--&gt;取到的是一个数组，具体的元素dom节点为数组的第一项</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>scroll<span class="token punctuation">.</span><span class="token function">scrollToElement</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
        <span class="token comment">// scroll插件的而一个方法帮我们调到制定元素</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>Todo2. 滑动右侧字母表，list跟着滑动到对应的位置</strong></p> <ul><li><strong>Alphabet.vue</strong>
绑定star move end 三个触摸方法</li></ul> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>  @touchstart<span class="token operator">=</span><span class="token string">&quot;handleTouchStart&quot;</span>
  @touchmove<span class="token operator">=</span><span class="token string">&quot;handleTouchMove&quot;</span>
  @touchEnd<span class="token operator">=</span><span class="token string">&quot;handleTouchEnd&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>把字母表从cities获取放到计算属性letters中</p> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">letters</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> letters <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cities<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        letters<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> letters
      <span class="token comment">// ['A','B','C'...]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>将计算出的滑到哪个字母$emit传递给父元素</p> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">handleTouchMove</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>touchStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> startY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>offsetTop <span class="token comment">// A元素距离顶部的高度</span>
        <span class="token keyword">const</span> touchY <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientY <span class="token operator">-</span> <span class="token number">79</span> <span class="token comment">// 手指距离header下边缘的的距离</span>
        <span class="token keyword">const</span> index <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>touchY <span class="token operator">-</span> startY<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">22</span><span class="token punctuation">)</span> <span class="token comment">// 滑动了第几个字母</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>letters<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>letters<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// console.log(index)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li><strong>City.vue</strong>
@change=&quot;handleLetterChange&quot;接收来自Alphabet的letter
<code>:letter=&quot;letter&quot;</code> 传递给list
同样的和1一样使用watch来监视</li></ul> <p><strong>Todo3. 列表组件优化</strong></p> <ol><li><code>const startY = this.$refs['A'][0].offsetTop</code>
startY的值是固定的，可以提取出来</li></ol> <p>放在updated生命周期函数钩子中，因为刚开始加载citise是通过json获取的，刚开始获取不到的时候是空，之后有获取到了ajax的内容，页面更新，就会执行updated钩子函数</p> <ol start="2"><li>函数节流
手指在屏幕上滑动的时候，函数执行的次数是非常高的，我们可以采用函数节流
通过定义一个定时器，来大大提高我们代码性能</li></ol> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token function">handleTouchMove</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>touchStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">clearTimeout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> touchY <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>clientY <span class="token operator">-</span> <span class="token number">79</span> <span class="token comment">// 手指距离header下边缘的的距离</span>
          <span class="token keyword">const</span> index <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>touchY <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>startY<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">22</span><span class="token punctuation">)</span> <span class="token comment">// 滑动了第几个字母</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>letters<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>letters<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
          <span class="token comment">// console.log(index)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_3-7-完善搜索框-逻辑"><a href="#_3-7-完善搜索框-逻辑" class="header-anchor">#</a> 3.7 完善搜索框--逻辑</h3> <ul><li>在search.vue增加search-content类 用于展示搜索内容</li></ul> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;search-content&quot;</span> ref<span class="token operator">=</span><span class="token string">&quot;search&quot;</span> v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">&quot;keyword&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li
          <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;search-item border-bottom&quot;</span>
          v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item of list&quot;</span>
          <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.id&quot;</span>
        <span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;search-item border-bottom&quot;</span> v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">&quot;hasNoData&quot;</span><span class="token operator">&gt;</span>
          没有找到匹配数据
        <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p>ref = search 用于在mounted挂载滚动插件 v-show=&quot;keyword&quot; 没有输入内容不显示</p></blockquote> <ul><li><p>在watch中监听keyword的变化，使用循环遍历，通过筛选把符合的city追加到list数组</p></li> <li><p>使用v-for循环输出list</p></li> <li><p>中间使用了定时器来实现函数节流来提高性能</p></li></ul> <h2 id="_4-使用vuex来实现数据共享"><a href="#_4-使用vuex来实现数据共享" class="header-anchor">#</a> 4.使用Vuex来实现数据共享</h2> <h3 id="_4-1-实现city和home组件的数据联动"><a href="#_4-1-实现city和home组件的数据联动" class="header-anchor">#</a> 4.1 实现city和home组件的数据联动</h3> <blockquote><p>我们想要城市页面和首页实现数据共享
City.vue和Home.vue是没有一个父组件可供中转，那么想进行两者的通信，该怎么办呢？</p></blockquote> <p><strong>Vuex</strong></p> <ul><li>npm install vuex --save</li> <li>在src目录下创建store文件夹并新建index.js文件</li></ul> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 向外暴露一个由Actions State Mutations 三个组成的系统对象</span>
  state<span class="token operator">:</span> <span class="token punctuation">{</span>
    city<span class="token operator">:</span> <span class="token string">'aaa'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// actions: {</span>
  <span class="token comment">//   changeCity (ctx, city) { // 借助这个ctx上下文来使用commit方法来调用Mutations完成数据的更改</span>
  <span class="token comment">//     console.log(city)</span>
  <span class="token comment">//     console.log(ctx)</span>
  <span class="token comment">//     ctx.commit('MchangeCity', city)</span>
  <span class="token comment">//   }</span>
  <span class="token comment">// },</span>
  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">MchangeCity</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> city</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>city <span class="token operator">=</span> city
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li>在main.js中引入
<code>import store from './store' // vuex</code> 这样我们全局都能访问到store了
并在vue实例中申明store,这样，我们以后就能使用vuex的数据了</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>city<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>具体使用</strong></p> <ol><li>把要公用的数据（例如city）定义到store/index.js的state中，在页面中把有city的地方换成</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{{this.$store.state.city}}</span><span class="token template-punctuation string">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>我们为循环的每一个城市按钮绑定一个方法 <code>@click=&quot;handleCityClick(item.name)</code>
并在methods中定义方法:</li></ol> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleCityClick</span> <span class="token punctuation">(</span><span class="token parameter">city</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'MchangeCity'</span><span class="token punctuation">,</span> city<span class="token punctuation">)</span> <span class="token comment">// 想要通过actions调用方法必须使用dispatch 或者 跳过actions直接通过commit来调用Mutations</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token comment">// 选择后跳转到主页 实现联动 用了vue-router的编程跳转链接</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="3"><li>在store中定义Actions函数和Mutations函数 来实现数据的修改</li></ol> <p><strong>总结:</strong></p> <blockquote><p>想要通过vuex来管理公用数据,想要更改数据 要经过一下步骤</p></blockquote> <ol><li>组件 ---dispatch---&gt; Actions</li></ol> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleCityClick</span> <span class="token punctuation">(</span><span class="token parameter">city</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'changeCity'</span><span class="token punctuation">,</span> city<span class="token punctuation">)</span> <span class="token comment">// 想要通过actions调用方法必须使用dispatch</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>Actions ---commit---&gt; Mutations</li></ol> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>actions<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">changeCity</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> city</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 借助这个ctx上下文来使用commit方法来调用Mutations完成数据的更改</span>
      ctx<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'MchangeCity'</span><span class="token punctuation">,</span> city<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="3"><li>Mutations ------&gt; State</li></ol> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">MchangeCity</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> city</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>city <span class="token operator">=</span> city
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>在不复杂的环境下，有的时候我们更爱数据并不一定需要经过Actions，组件可以直接通过commit来使Mutations改变State</p></blockquote> <ol><li>组件 ---commit---&gt; Mutations</li></ol> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleCityClick</span> <span class="token punctuation">(</span><span class="token parameter">city</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'MchangeCity'</span><span class="token punctuation">,</span> city<span class="token punctuation">)</span> <span class="token comment">// 想要通过actions调用方法必须使用dispatch</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>Mutations ------&gt; State</li></ol> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>  mutations<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">MchangeCity</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> city</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>city <span class="token operator">=</span> city
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4-2-vuex的高级使用和localstorage"><a href="#_4-2-vuex的高级使用和localstorage" class="header-anchor">#</a> 4.2 vuex的高级使用和localStorage</h3> <blockquote><p>上述我们已经完成了vuex 实现两个不先练的组件的数据共享，但是我们一旦刷新我们的页面，我们的页面数据还是默认的我们在store中定义的数据，如何让程序记录我们的操作</p></blockquote> <p><strong>使用localStorage来完成</strong>
在Mutations定义的方法里 加入：
<code>localStorage.city = city</code> 来记录我们选择的城市
在state中
<code>city: localStorage.city || '南阳'</code>
这样 浏览器就能记忆我们选择的城市了</p> <blockquote><p>但是此时存在一个问题，浏览器如果使用了隐身模式或者关闭了浏览器存储，我们的程序就会直接报错无法执行
我们可以使用try catch来优化一下我们的代码</p></blockquote> <hr> <p><strong>vuex高级</strong></p> <ol><li><p>慢慢的 我们的store- index中的代码越来越多，我们可以把状态分开到不同的文件中管理</p></li> <li><p>使用map辅助函数来进行优化</p></li></ol> <h3 id="_4-3-使用keep-alive优化网页性能"><a href="#_4-3-使用keep-alive优化网页性能" class="header-anchor">#</a> 4.3 使用keep-alive优化网页性能</h3> <blockquote><p>路由发生切换的时候 ajax都会被重新发送，为什么？</p></blockquote> <p>因为我们的页面每一次渲染都会执行mounted钩子 而我们的ajax请求就是放在mounted中进行的</p> <blockquote><p>怎么优化？</p></blockquote> <p>将我们的router-view坑用keep-alive标签包裹起来</p> <div class="language-Html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>页面被keep-alive包裹起来，就会是页面的资源加载到内存当中，不需要重新渲染，也不需要从新执行钩子，来回返回页面也只会获取一次json
此时，我们的vue中多出来一个生命周期函数钩子：<code>activated</code></p> <h3 id="_4-4-选择城市后返回页面-页面需要被修改"><a href="#_4-4-选择城市后返回页面-页面需要被修改" class="header-anchor">#</a> 4.4 选择城市后返回页面 页面需要被修改</h3> <blockquote><p>我们之前写的代码是固定的，虽然选择的城市发生变化,但是我们的我们的home页面中的内容并没有变化，怎么办？</p></blockquote> <p>我们home首页的内容是有index.json ajax来获取的 我们只需要在home组件获得ajax的时候 使用？传参的方式，使得每一个城市对应自己的json文件，就可以了
<code>axios.get('/api/index.json?city=' + this.city</code></p> <blockquote><p>但是此时的json文件被缓存到了内存当中，存的还是第一次的值，我们怎么改变缓存的数据呢</p></blockquote> <p>由于此时的页面被keep-alive标签包裹，我们的ajax请求只会在第一次刷新的时候被获取，但是此时我们需要由城市列表选择的城市来同步我们首页的json文件以达到统一刷新的目的</p> <blockquote><p>keep-detail 可以加入exclude=&quot;不被缓存的组件名字&quot; 这样就可以指定排除某个组件不被缓存</p></blockquote> <p><strong>此时我们可以使用activated生命周期钩子</strong>
因为在被包裹keep-alive标签之后，mounted钩子不会执行，但是activated钩子只要页面重新出现，就会执行，所以我们可以在activated钩子函数中 判断页面选择的城市和之前的城市是否为一个城市，如果不是一个城市，则重新发送ajax请求
我们在data数据中新增一个 <code>lastcity</code> 数据 配合<code>activated</code>钩子使用</p> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">activated</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>lastcity <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>city<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>lastcity <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>city
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_5-详情页面的制作"><a href="#_5-详情页面的制作" class="header-anchor">#</a> 5.详情页面的制作</h2> <p>创建detail.vue Banner.vue 导入detail路由</p> <h3 id="_5-1-banner的制作"><a href="#_5-1-banner的制作" class="header-anchor">#</a> 5.1 banner的制作</h3> <ul><li><p>字体图标更新后 记得替换字体文件和iconfont.css的一段 base64的代码、</p></li> <li><p>使用 <code>background-image linear-gradient</code> 达到渐变效果</p></li></ul> <h3 id="_5-2-banner画廊组件"><a href="#_5-2-banner画廊组件" class="header-anchor">#</a> 5.2 banner画廊组件</h3> <blockquote><p>这个画廊组件不仅仅这个组件中要使用，以后可能在别的地方也会使用</p></blockquote> <p>所以我们新建 src/common/gallary/Gallary.vue 编写画廊组件为以后复用</p> <ul><li><p>使用swiper插件实现图片轮播滚动</p></li> <li><p>当我们点击banner的时候调到画廊页面，会发现渲染有问题，怎么办？
点击跳转dom节点，会使得我们的css属性计算出错，从而造成错误，swiper为我们提供了一组配置，我们在配置项里添加 <code>observeParents: true</code> 和 <code>observer: true</code>
observeParents: 将observe应用于Swiper的父元素。当Swiper的父元素变化时，例如window.resize，Swiper更新。
observer: 启动动态检查器(OB/观众/观看者)，当改变swiper的样式（例如隐藏/显示）或者修改swiper的子元素时，自动初始化swiper。</p></li></ul> <h3 id="_5-3-渐隐逐显的header"><a href="#_5-3-渐隐逐显的header" class="header-anchor">#</a> 5.3 渐隐逐显的header</h3> <ul><li><p>页面有两个头部，一个是刚进去的的定位为abs的返回按钮，另外一个是定位是fixed头部导航</p></li> <li><p>刚开始我们使用v-show = showAbs 和 v-show = ！showAbs 来分别控制两个头部，使其只显示一个</p></li> <li><p>使用 <code>window.addEventListener('scroll', this.handleScroll)</code> 来监听滚动的距离以切换哪个头部的展示 这个方法放在<code>activated</code>钩子里</p></li> <li><p>handleScroll方法使用 document.documentElement.scrollTop 监听滚动离顶部的距离</p></li></ul> <blockquote><p>展示效果做好，剩下渐隐渐显的效果</p></blockquote> <p>在 fixed 的头部标签绑定样式对象 <code>:style=&quot;opacityStyle&quot;</code></p> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">handleScroll</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> top <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop
      <span class="token keyword">if</span> <span class="token punctuation">(</span>top <span class="token operator">&gt;</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 过渡阶段</span>
        <span class="token keyword">let</span> opacity <span class="token operator">=</span> top <span class="token operator">/</span> <span class="token number">140</span> <span class="token comment">// 过渡效果</span>
        opacity <span class="token operator">=</span> opacity <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> opacity
        <span class="token keyword">this</span><span class="token punctuation">.</span>opacityStyle <span class="token operator">=</span> <span class="token punctuation">{</span> opacity <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>showAbs <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>showAbs <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_5-4-事件绑定的相关问题"><a href="#_5-4-事件绑定的相关问题" class="header-anchor">#</a> 5.4 事件绑定的相关问题</h3> <p>我们在5.3中，使用 <code>window.addEventListener('scroll', this.handleScroll)</code> 来监听滚动的距离，但是这个监听方法被绑定在了全局window中，所以我们的其他页面滚动时也会执行这段代码</p> <blockquote><p>那么 我们怎么样才能使其只绑定在详情页呢？
当我们使用keep-alive标签的时候，activated钩子函数产生的同时，也产生了一个deactivated的函数钩子，在activated绑定，在deactivated解绑即可</p></blockquote> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token function">activated</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleScroll<span class="token punctuation">)</span> <span class="token comment">// 页面展示绑定</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">deactivated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleScroll<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_5-5-递归列表组件"><a href="#_5-5-递归列表组件" class="header-anchor">#</a> 5.5 递归列表组件</h3> <blockquote><p>组件自生调用自己</p></blockquote> <h3 id="_5-6-ajax数据替换"><a href="#_5-6-ajax数据替换" class="header-anchor">#</a> 5.6 ajax数据替换</h3> <blockquote><p>我们发现，首页滑动到底部，在点击详情页面，详情页面初始状态也是在底部，怎么办？</p></blockquote> <p>页面滑动 各个组件会相互影响，我们可以在路由的配置选项中添加如下配置：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>scrollBehavior: function (to, from, savedPosition) {
  return savedPosition || { x: 0, y: 0 }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><a href="https://cn.vuejs.org/v2/guide/migration-vue-router.html#saveScrollPosition-%E6%9B%BF%E6%8D%A2" target="_blank" rel="noopener noreferrer">router进阶<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p>每个组件的export defalut的name是干什么用的？</p></blockquote> <p>我们目前接触到的：</p> <ol><li>递归组件中可以用到它</li> <li>对某个页面取消缓存的时候</li> <li>vue tools中组件的显示名字</li></ol> <h2 id="_6-vue项目上线前准备"><a href="#_6-vue项目上线前准备" class="header-anchor">#</a> 6 Vue项目上线前准备</h2> <h3 id="_6-1-vue项目的接口联调"><a href="#_6-1-vue项目的接口联调" class="header-anchor">#</a> 6.1 Vue项目的接口联调</h3> <blockquote><p>我们之前都是自己模拟后端的数据，实际项目中，我们是要和后端的数据，实现项目联调，如何进行？</p></blockquote> <p>把mock中的数据替换成真正的后端服务器数据</p> <p>把config index.js 中的api制定的路径改为后端服务器的地址 一般都是本地80端口，一般是一下的形式</p> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code>proxyTable<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    target<span class="token operator">:</span> <span class="token string">'http://localhost:80'</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_6-2-vue项目的真机测试"><a href="#_6-2-vue项目的真机测试" class="header-anchor">#</a> 6.2 Vue项目的真机测试</h3> <p>我们的项目是 通过 Webpack dev server 来进行的 它默认不支持ip地址的访问方式，要把它的默认配置项修改</p> <p>在package.json下 修改dev配置项 <code>webpack-dev-server --host 0,0,0,0</code>
这样，就可以直接通过手机用ip地址来访问我们的项目</p> <blockquote><p>在真机上，我们拖动字母表，会发现整个页面都跟着滚动，出现了bug，怎么半？</p></blockquote> <p><code>@touchstart.prevent=&quot;handleTouchStart&quot;</code> 组织拖动的默认行为</p> <blockquote><p>在低版本的安卓浏览器，可能出现白屏现象，怎么办？</p></blockquote> <p>出现白屏现象的原因大部分是因为手机浏览器不支持promise特性，我们在项目中安装一个第三方的包</p> <ul><li><code>npm install babel-polyfill --save</code></li> <li>在main.js引入包 <code>import 'babel-polyfill'</code></li></ul> <h3 id="_6-3-vue项目的打包上线"><a href="#_6-3-vue项目的打包上线" class="header-anchor">#</a> 6.3 Vue项目的打包上线</h3> <ol><li>运行命令 npm run build  生成一个能被浏览器运行的代码，打包完成后，项目目录中多出来一个dist文件夹，里面就是是上线代码</li> <li>dist文件夹里的文件放到服务器跟目录中，就能上线了</li> <li>如果想把上线文件放到根目录以外的地方，我们可以更改我们的config/index.js --&gt; build--&gt; assetsPublicPath路径</li></ol> <h2 id="end-to-do"><a href="#end-to-do" class="header-anchor">#</a> End To Do</h2> <h3 id="vue基础官方文档熟连掌握"><a href="#vue基础官方文档熟连掌握" class="header-anchor">#</a> vue基础官方文档熟连掌握</h3> <h3 id="vuerouter-细节"><a href="#vuerouter-细节" class="header-anchor">#</a> VueRouter 细节</h3> <h3 id="vuex-细节"><a href="#vuex-细节" class="header-anchor">#</a> Vuex 细节</h3> <h3 id="vue-服务器端渲染-（难）"><a href="#vue-服务器端渲染-（难）" class="header-anchor">#</a> Vue 服务器端渲染 （难）</h3> <p>###　Webpack Bable Es6</p></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">最后更新于: </span> <span class="time">8/15/2020, 5:50:00 AM</span></div></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-2a0afe42 data-v-2a0afe42><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-2a0afe42><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-2a0afe42></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-2a0afe42></path></svg></div></div></div>
    <script src="/assets/js/app.ebd6c005.js" defer></script><script src="/assets/js/3.f6a0899c.js" defer></script><script src="/assets/js/1.38ae5032.js" defer></script><script src="/assets/js/28.04d5f483.js" defer></script>
  </body>
</html>
